<& /Elements/Header, Title => $title &>
<& /Elements/Tabs &>
<& /Elements/ListActions, actions => \@results &>

<form method="post" class="automatic-assignment" action="AutomaticAssignment.html">
<input type="hidden" class="hidden" name="id" value="<%$QueueObj->Id%>" />

<h1>Filters</h1>

% my $i = 0;
% for my $filter (@{ $config->{filters} }) {
%    ++$i;
%    my $name = "BusinessHours";
%    my $path = "/Admin/Queues/Elements/Filter/$name";
%    my $prefix = "Filter_${name}_$i";

%    $m->comp($path, prefix => $prefix, config => $filter);
% }

<select>
<option value="">-</option>
<option value="BusinessHours">Business Hours</option>
<option value="ExcludedDates">Excluded Dates</option>
<option value="MemberOfGroup">Member of Group</option>
<option value="MemberOfRole">Member of Role</option>

</select>
<input type="submit" class="button" value="Add Filter">

<h1>Chooser</h1>

</form>

<%INIT>
my @results;

my $QueueObj = RT::Queue->new($session{'CurrentUser'});
$QueueObj->Load($id) || Abort(loc("Couldn't load queue", $id));

my $attr = $QueueObj->FirstAttribute('AutomaticAssignment');
my $config = $attr ? $attr->Content : {};

my $title = loc('Automatic Assignment for queue [_1]', $QueueObj->Name);
</%INIT>
<%ARGS>
$id => undef
</%ARGS>
